---
title: "Load data"
format: html
editor: source
author: authors
---

### Source functions

```{r}
source("../R/99_proj_func.R")
```

### Libraries:

```{r}
#| message: false
library("tidyverse")
library(httr)
library(jsonlite)
```

### Generate data directories

```{r}
make_dir("../_raw")
make_dir("../data")
```

### Load files:

```{r}
#| message: false

raw_dir <- "../_raw/"
download_dataset(raw_dir)

file_feature_data <- "GSE27272Norm_featureData"
file_pheno_data <- "GSE27272Norm_phenoData"
file_norm_exprs <- "GSE27272Norm_exprs"

feature_data <- read_tibble(raw_dir, file_feature_data)
pheno_data <- read_tibble(raw_dir, file_pheno_data)
norm_exprs <- read_tibble(raw_dir, file_norm_exprs)

feature_data |> sample_n(5)
pheno_data |> sample_n(5)
norm_exprs |> sample_n(5)
```

### Write files

We should write a tsv file to our data folder containing the data frames that have been loaded in. To be improved...

```{r}
write_tsv(x = feature_data,
          file = "../data/01_feature_data.tsv")

write_tsv(x = pheno_data,
          file = "../data/01_pheno_data.tsv")

write_tsv(x = norm_exprs,
          file = "../data/01_norm_exprs.tsv")
```
